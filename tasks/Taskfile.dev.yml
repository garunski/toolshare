version: '3'

tasks:
  # ============================================================================
  # DEVELOPMENT TASKS
  # ============================================================================

  dev-only:
    silent: true
    desc: Start Next.js development server only (without Supabase)
    cmds:
      - npm run dev

  build:
    silent: true
    desc: Build the project for production
    cmds:
      - npm run build

  # ============================================================================
  # CODE QUALITY TASKS
  # ============================================================================

  lint:
    silent: true
    desc: Run ESLint to check code quality
    cmds:
      - npx eslint .

  lint-fix:
    silent: true
    desc: Automatically fix ESLint issues
    cmds:
      - npx eslint --fix .

  type-check:
    silent: true
    desc: Run TypeScript type checking
    cmds:
      - npx tsc --noEmit

  format:
    desc: Format code with Prettier
    cmds:
      - npm run format

  format-check:
    silent: true
    desc: Check code formatting with Prettier
    cmds:
      - npm run format:check

  format-fix:
    silent: true
    desc: Format code and fix linting issues
    cmds:
      - |
        npm run format
        npm run lint:fix

  # ============================================================================
  # QUALITY TASKS
  # ============================================================================

  code-quality:
    silent: true
    desc: Run all code quality checks
    deps: [lint, type-check, format-check]

  clean-all:
    silent: true
    desc: Clean everything including node_modules (requires reinstall)
    cmds:
      - |
        rm -rf .next
        rm -rf node_modules
        rm -rf .turbo
        echo "⚠️  Run 'task setup:install-deps' to reinstall dependencies"

  code-fix:
    silent: true
    desc: Fix all code quality issues
    deps: [format-fix, type-check] 