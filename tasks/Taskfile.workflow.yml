version: '3'

tasks:
  # ============================================================================
  # DEVELOPMENT WORKFLOW TASKS
  # ============================================================================

  workflow-dev:
    desc: Complete development workflow (setup, start services, dev server)
    deps: [setup, supabase-start]
    cmds:
      - |
        echo "ğŸ¯ Starting development workflow..."
        echo "âœ… Setup complete, starting development server..."
        task dev

  workflow-reset:
    desc: Reset development environment (stop services, clean, restart)
    cmds:
      - |
        echo "ğŸ”„ Resetting development environment..."
        supabase stop
        task clean
        task setup
        echo "âœ… Environment reset complete"
        echo "ğŸš€ Run 'task workflow-dev' to start development"

  # ============================================================================
  # DEPLOYMENT TASKS (Future use)
  # ============================================================================

  deploy-staging:
    desc: Deploy to staging environment
    cmds:
      - |
        echo "ğŸš€ Deploying to staging..."
        echo "âš ï¸  Deployment not configured yet"

  deploy-production:
    desc: Deploy to production environment
    cmds:
      - |
        echo "ğŸš€ Deploying to production..."
        echo "âš ï¸  Deployment not configured yet"

  # ============================================================================
  # ADVANCED WORKFLOW TASKS
  # ============================================================================

  workflow-full-reset:
    desc: Complete environment reset (stop, clean-all, reinstall, restart)
    cmds:
      - |
        echo "ğŸ”„ Complete environment reset..."
        supabase stop
        task clean-all
        task install-deps
        task setup-supabase
        echo "âœ… Complete reset finished"
        echo "ğŸš€ Run 'task dev-full' to start development"

  workflow-db-reset:
    desc: Reset database and regenerate types
    cmds:
      - |
        echo "ğŸ”„ Resetting database and types..."
        supabase db reset
        task database:db-types
        task database:db-seed-users
        echo "âœ… Database reset and types regenerated"

  workflow-code-quality:
    desc: Run all code quality checks
    cmds:
      - |
        echo "ğŸ” Running code quality checks..."
        task dev:format-check
        task dev:lint
        task dev:type-check
        echo "âœ… Code quality checks complete"

  workflow-code-fix:
    desc: Fix all code quality issues (formatting and linting)
    cmds:
      - |
        echo "ğŸ”§ Fixing code quality issues..."
        task dev:format-fix
        echo "âœ… Code quality fixes complete" 