version: '3'

tasks:
  # ============================================================================
  # SUPABASE DATABASE TASKS
  # ============================================================================

  supabase-start:
    silent: true
    desc: Start Supabase services locally
    cmds:
      - supabase start --exclude vector

  db-reset:
    silent: true
    desc: Reset database, generate types, and seed all data (including users)
    cmds:
      - |
        supabase db reset
        supabase gen types typescript --local > src/types/supabase.ts
        npx tsx supabase/seed/index.ts

  db-types:
    silent: true
    desc: Generate TypeScript types from database schema
    cmds:
      - supabase gen types typescript --local > src/types/supabase.ts

  db-seed:
    silent: true
    desc: Create test users and sample data
    cmds:
      - npx tsx supabase/seed/index.ts 